<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eatsome Login Helper</title>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 500px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1 {
      color: #FFCC00;
      text-align: center;
      margin-bottom: 30px;
    }
    .card {
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      background-color: #FFCC00;
      color: #333;
      border: none;
      cursor: pointer;
      margin-top: 10px;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #E6B800;
    }
    .tab-buttons {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #ddd;
    }
    .tab-button {
      background: none;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
      color: #666;
      margin-right: 10px;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }
    .tab-button.active {
      color: #FFCC00;
      border-bottom: 3px solid #FFCC00;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .user-info {
      background-color: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .message {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      display: none;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    pre {
      background-color: #f8f8f8;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
    .user-cards {
      margin-top: 20px;
    }
    .user-card {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .user-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .user-card h3 {
      margin-top: 0;
      color: #333;
    }
    .user-card p {
      margin: 5px 0;
    }
    .user-card .role {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      text-transform: uppercase;
    }
    .role.admin {
      background-color: #d1ecf1;
      color: #0c5460;
    }
    .role.customer {
      background-color: #d4edda;
      color: #155724;
    }
    .role.restaurant_owner {
      background-color: #fff3cd;
      color: #856404;
    }
  </style>
</head>
<body>
  <h1>Eatsome Login Helper</h1>
  
  <div class="tab-buttons">
    <button class="tab-button active" data-tab="login">Inloggen</button>
    <button class="tab-button" data-tab="signup">Registreren</button>
    <button class="tab-button" data-tab="test-users">Test Gebruikers</button>
  </div>
  
  <div id="message" class="message"></div>
  
  <div id="login" class="tab-content active">
    <div class="card">
      <h2>Inloggen</h2>
      <form id="login-form">
        <div class="form-group">
          <label for="login-email">E-mail</label>
          <input type="email" id="login-email" required>
        </div>
        <div class="form-group">
          <label for="login-password">Wachtwoord</label>
          <input type="password" id="login-password" required>
        </div>
        <button type="submit">Inloggen</button>
      </form>
    </div>
  </div>
  
  <div id="signup" class="tab-content">
    <div class="card">
      <h2>Registreren</h2>
      <form id="signup-form">
        <div class="form-group">
          <label for="signup-email">E-mail</label>
          <input type="email" id="signup-email" required>
        </div>
        <div class="form-group">
          <label for="signup-password">Wachtwoord</label>
          <input type="password" id="signup-password" required>
        </div>
        <div class="form-group">
          <label for="signup-role">Rol</label>
          <select id="signup-role">
            <option value="customer">Klant</option>
            <option value="restaurant_owner">Restaurant Eigenaar</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <button type="submit">Registreren</button>
      </form>
    </div>
  </div>
  
  <div id="test-users" class="tab-content">
    <div class="card">
      <h2>Test Gebruikers</h2>
      <p>Klik op een gebruiker om direct in te loggen:</p>
      
      <div class="user-cards">
        <div class="user-card" data-email="kocamis.emre@gmail.com" data-password="Welkom123!">
          <h3>Admin Emre</h3>
          <p>Email: kocamis.emre@gmail.com</p>
          <p>Wachtwoord: Welkom123!</p>
          <span class="role admin">Admin</span>
        </div>
        
        <div class="user-card" data-email="emre___1989@hotmail.com" data-password="kocamis40">
          <h3>Customer Emre</h3>
          <p>Email: emre___1989@hotmail.com</p>
          <p>Wachtwoord: kocamis40</p>
          <span class="role customer">Klant</span>
        </div>
        
        <div class="user-card" data-email="emre.kocamis@hotmail.com" data-password="kocamis40">
          <h3>Restaurant Emre</h3>
          <p>Email: emre.kocamis@hotmail.com</p>
          <p>Wachtwoord: kocamis40</p>
          <span class="role restaurant_owner">Restaurant</span>
        </div>
      </div>
    </div>
  </div>
  
  <div id="user-info" class="user-info" style="display: none;">
    <h2>Huidige Gebruiker</h2>
    <pre id="current-user"></pre>
    <button id="logout-button">Uitloggen</button>
  </div>
  
  <script>
    // Supabase initialiseren
    const supabaseUrl = 'https://xplxxwodtmlrqrifvlcj.supabase.co';
    const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhwbHh4d29kdG1scnFyaWZ2bGNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTUzNDgwMDQsImV4cCI6MjAzMDkyNDAwNH0.QoN4TBqn0DvUu2nRSldnvnxYKxFwuYMsAF4yQMOYvbQ';
    const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);
    
    // DOM elementen
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const userCards = document.querySelectorAll('.user-card');
    const userInfoDiv = document.getElementById('user-info');
    const currentUserPre = document.getElementById('current-user');
    const logoutButton = document.getElementById('logout-button');
    const messageDiv = document.getElementById('message');
    
    // Tab functionaliteit
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabName = button.getAttribute('data-tab');
        
        // Update actieve tab button
        tabButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        
        // Update zichtbare content
        tabContents.forEach(content => content.classList.remove('active'));
        document.getElementById(tabName).classList.add('active');
      });
    });
    
    // Bericht weergeven
    function showMessage(text, type) {
      messageDiv.textContent = text;
      messageDiv.className = `message ${type}`;
      messageDiv.style.display = 'block';
      
      // Bericht na 5 seconden verbergen
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 5000);
    }
    
    // Gebruiker weergeven
    function displayUser(user) {
      if (user) {
        currentUserPre.textContent = JSON.stringify(user, null, 2);
        userInfoDiv.style.display = 'block';
      } else {
        userInfoDiv.style.display = 'none';
      }
    }
    
    // Controleer bij laden of er een gebruiker is ingelogd
    async function checkCurrentUser() {
      const { data: { user } } = await supabase.auth.getUser();
      displayUser(user);
    }
    
    // Login formulier
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      try {
        const { data, error } = await supabase.auth.signInWithPassword({
          email,
          password
        });
        
        if (error) throw error;
        
        showMessage(`Succesvol ingelogd als ${email}`, 'success');
        displayUser(data.user);
        loginForm.reset();
      } catch (error) {
        showMessage(`Login fout: ${error.message}`, 'error');
        console.error('Login error:', error);
      }
    });
    
    // Registratie formulier
    signupForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const role = document.getElementById('signup-role').value;
      
      try {
        const { data, error } = await supabase.auth.signUp({
          email,
          password,
          options: {
            data: {
              role: role
            }
          }
        });
        
        if (error) throw error;
        
        showMessage(`Registratie succesvol! Een bevestigingsmail is verzonden naar ${email}`, 'success');
        displayUser(data.user);
        signupForm.reset();
      } catch (error) {
        showMessage(`Registratie fout: ${error.message}`, 'error');
        console.error('Signup error:', error);
      }
    });
    
    // Test gebruiker kaarten
    userCards.forEach(card => {
      card.addEventListener('click', async () => {
        const email = card.getAttribute('data-email');
        const password = card.getAttribute('data-password');
        
        try {
          const { data, error } = await supabase.auth.signInWithPassword({
            email,
            password
          });
          
          if (error) throw error;
          
          showMessage(`Succesvol ingelogd als ${email}`, 'success');
          displayUser(data.user);
        } catch (error) {
          showMessage(`Login fout: ${error.message}`, 'error');
          console.error('Login error:', error);
        }
      });
    });
    
    // Uitloggen
    logoutButton.addEventListener('click', async () => {
      try {
        const { error } = await supabase.auth.signOut();
        
        if (error) throw error;
        
        showMessage('Succesvol uitgelogd', 'success');
        displayUser(null);
      } catch (error) {
        showMessage(`Uitlog fout: ${error.message}`, 'error');
        console.error('Logout error:', error);
      }
    });
    
    // Controleer bij laden van de pagina
    document.addEventListener('DOMContentLoaded', checkCurrentUser);
    
    // Luister naar auth veranderingen
    supabase.auth.onAuthStateChange((event, session) => {
      if (event === 'SIGNED_IN') {
        displayUser(session.user);
      } else if (event === 'SIGNED_OUT') {
        displayUser(null);
      }
    });
  </script>
</body>
</html> 